{"version":3,"sources":["webpack:///atum-data-export.js","webpack:///webpack/bootstrap 05a97357da1f66547210","webpack:///./assets/js/src/config/_settings.ts","webpack:///./assets/js/src/utils/_utils.ts","webpack:///./assets/js/src/data-export.ts","webpack:///./assets/js/src/components/export/_export.ts"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","0","__webpack_exports__","Settings","varName","defaults","this","settings","localizedOpts","window","assign","prop","getAll","delete","1","Utils","delayTimer","delay","callback","ms","clearTimeout","setTimeout","filterQuery","query","variable","vars","split","length","pair","filterByData","$elem","val","filter","index","elem","$","data","addNotice","type","msg","$notice","hide","$dismissButton","class","$headerEnd","siblings","remove","before","append","slideDown","on","evt","preventDefault","fadeTo","slideUp","imagesLoaded","$wrapper","$imgs","find","Deferred","resolve","promise","dfds","each","dfd","img","Image","push","onload","onerror","src","when","apply","getUrlParameter","URLSearchParams","location","search","replace","regex","RegExp","results","exec","decodeURIComponent","htmlDecode","input","e","document","createElement","innerHTML","childNodes","nodeValue","61","value","__WEBPACK_IMPORTED_MODULE_0__config_settings__","__WEBPACK_IMPORTED_MODULE_1__components_export_export__","jQuery","62","__WEBPACK_IMPORTED_MODULE_0__utils_utils__","DataExport","_this","$pageWrapper","$tabContentWrapper","$tabsWrapper","createExportTab","downloadReport","$checkbox","currentTarget","$input","parent","is","$tab","clone","$tabContent","attr","id","aria-label","$typeFieldset","insertAfter","last","$catFieldset","$titleLengthFieldset","$formatFieldset","key","first","aria-controls","text","prepend","click","toggleEvent","$exportForm","open","serialize"],"mappings":"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","file":"atum-data-export.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 61);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ 0:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar Settings = (function () {\n    function Settings(varName, defaults) {\n        if (defaults === void 0) { defaults = {}; }\n        this.varName = varName;\n        this.defaults = defaults;\n        this.settings = {};\n        var localizedOpts = typeof window[varName] !== 'undefined' ? window[varName] : {};\n        Object.assign(this.settings, defaults, localizedOpts);\n    }\n    Settings.prototype.get = function (prop) {\n        if (typeof this.settings[prop] !== 'undefined') {\n            return this.settings[prop];\n        }\n        return undefined;\n    };\n    Settings.prototype.getAll = function () {\n        return this.settings;\n    };\n    Settings.prototype.delete = function (prop) {\n        if (this.settings.hasOwnProperty(prop)) {\n            delete this.settings[prop];\n        }\n    };\n    return Settings;\n}());\n/* harmony default export */ __webpack_exports__[\"a\"] = (Settings);\n\n\n/***/ }),\n\n/***/ 1:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Utils; });\nvar Utils = {\n    delayTimer: 0,\n    delay: function (callback, ms) {\n        clearTimeout(this.delayTimer);\n        this.delayTimer = setTimeout(callback, ms);\n    },\n    filterQuery: function (query, variable) {\n        var vars = query.split('&');\n        for (var i = 0; i < vars.length; i++) {\n            var pair = vars[i].split('=');\n            if (pair[0] === variable) {\n                return pair[1];\n            }\n        }\n        return false;\n    },\n    filterByData: function ($elem, prop, val) {\n        if (typeof val === 'undefined') {\n            return $elem.filter(function (index, elem) {\n                return typeof $(elem).data(prop) !== 'undefined';\n            });\n        }\n        ;\n        return $elem.filter(function (index, elem) {\n            return $(elem).data(prop) == val;\n        });\n    },\n    addNotice: function (type, msg) {\n        var $notice = $('<div class=\"' + type + ' notice is-dismissible\"><p><strong>' + msg + '</strong></p></div>').hide(), $dismissButton = $('<button />', { type: 'button', class: 'notice-dismiss' }), $headerEnd = $('.wp-header-end');\n        $headerEnd.siblings('.notice').remove();\n        $headerEnd.before($notice.append($dismissButton));\n        $notice.slideDown(100);\n        $dismissButton.on('click.wp-dismiss-notice', function (evt) {\n            evt.preventDefault();\n            $notice.fadeTo(100, 0, function () {\n                $notice.slideUp(100, function () {\n                    $notice.remove();\n                });\n            });\n        });\n    },\n    imagesLoaded: function ($wrapper) {\n        var $imgs = $wrapper.find('img[src!=\"\"]');\n        if (!$imgs.length) {\n            return $.Deferred().resolve().promise();\n        }\n        var dfds = [];\n        $imgs.each(function () {\n            var dfd = $.Deferred(), img = new Image();\n            dfds.push(dfd);\n            img.onload = function () {\n                dfd.resolve();\n            };\n            img.onerror = function () {\n                dfd.resolve();\n            };\n            img.src = this.src;\n        });\n        return $.when.apply($, dfds);\n    },\n    getUrlParameter: function (name) {\n        if (typeof URLSearchParams !== 'undefined') {\n            var urlParams = new URLSearchParams(window.location.search);\n            return urlParams.get(name);\n        }\n        else {\n            name = name.replace(/[\\[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\n            var regex = new RegExp('[\\\\?&]' + name + '=([^&#]*)'), results = regex.exec(window.location.search);\n            return results === null ? '' : decodeURIComponent(results[1].replace(/\\+/g, ' '));\n        }\n    },\n    htmlDecode: function (input) {\n        var e = document.createElement('div');\n        e.innerHTML = input;\n        return e.childNodes[0].nodeValue;\n    },\n};\n\n\n/***/ }),\n\n/***/ 61:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__config_settings__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_export_export__ = __webpack_require__(62);\nwindow['$'] = window['jQuery'];\n\n\njQuery(function ($) {\n    var settings = new __WEBPACK_IMPORTED_MODULE_0__config_settings__[\"a\" /* default */]('atumExport');\n    new __WEBPACK_IMPORTED_MODULE_1__components_export_export__[\"a\" /* default */](settings);\n});\n\n\n/***/ }),\n\n/***/ 62:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_utils__ = __webpack_require__(1);\n\nvar DataExport = (function () {\n    function DataExport(settings) {\n        var _this = this;\n        this.settings = settings;\n        this.$pageWrapper = $('#wpbody-content');\n        this.$tabContentWrapper = $('#screen-meta');\n        this.$tabsWrapper = $('#screen-meta-links');\n        this.createExportTab();\n        this.$pageWrapper\n            .on('submit', '#atum-export-settings', function (evt) {\n            evt.preventDefault();\n            _this.downloadReport();\n        })\n            .on('change', '#disableMaxLength', function (evt) {\n            var $checkbox = $(evt.currentTarget), $input = $checkbox.parent().siblings('input[type=number]');\n            if ($checkbox.is(':checked')) {\n                $input.prop('disabled', true);\n            }\n            else {\n                $input.prop('disabled', false);\n            }\n        });\n    }\n    DataExport.prototype.createExportTab = function () {\n        var $tab = this.$tabsWrapper.find('#screen-options-link-wrap').clone(), $tabContent = this.$tabContentWrapper.find('#screen-options-wrap').clone();\n        $tabContent.attr({\n            'id': 'atum-export-wrap',\n            'aria-label': this.settings.get('tabTitle'),\n        });\n        $tabContent.find('form').attr('id', 'atum-export-settings');\n        $tabContent.find('.screen-options').remove();\n        $tabContent.find('input[type=submit]').val(this.settings.get('submitTitle'));\n        $tabContent.find('#screenoptionnonce').remove();\n        if (typeof this.settings.get('productTypes') !== 'undefined') {\n            var $typeFieldset = $('<fieldset class=\"product-type\" />');\n            $typeFieldset.append(\"<legend>\" + this.settings.get('productTypesTitle') + \"</legend>\");\n            $typeFieldset.append(this.settings.get('productTypes'));\n            $typeFieldset.insertAfter($tabContent.find('fieldset').last());\n        }\n        if (typeof this.settings.get('categories') !== 'undefined') {\n            var $catFieldset = $('<fieldset class=\"product-category\" />');\n            $catFieldset.append(\"<legend>\" + this.settings.get('categoriesTitle') + \"</legend>\");\n            $catFieldset.append(this.settings.get('categories'));\n            $catFieldset.insertAfter($tabContent.find('fieldset').last());\n        }\n        var $titleLengthFieldset = $('<fieldset class=\"title-length\" />');\n        $titleLengthFieldset.append(\"<legend>\" + this.settings.get('titleLength') + \"</legend>\");\n        $titleLengthFieldset.append(\"<input type=\\\"number\\\" step=\\\"1\\\" min=\\\"0\\\" name=\\\"title_max_length\\\" value=\\\"\" + this.settings.get('maxLength') + \"\\\"> \");\n        $titleLengthFieldset.append(\"<label><input type=\\\"checkbox\\\" id=\\\"disableMaxLength\\\" value=\\\"yes\\\">\" + this.settings.get('disableMaxLength') + \"</label>\");\n        $titleLengthFieldset.insertAfter($tabContent.find('fieldset').last());\n        var $formatFieldset = $('<fieldset class=\"output-format\" />');\n        $formatFieldset.append(\"<legend>\" + this.settings.get('outputFormatTitle') + \"</legend>\");\n        $.each(this.settings.get('outputFormats'), function (key, value) {\n            $formatFieldset.append(\"<label><input type=\\\"radio\\\" name=\\\"output-format\\\" value=\\\"\" + key + \"\\\">\" + value + \"</label>\");\n        });\n        $formatFieldset.find('input[name=output-format]').first().prop('checked', true);\n        $formatFieldset.insertAfter($tabContent.find('fieldset').last());\n        $tabContent.find('.submit').before('<div class=\"clear\"></div>');\n        $tab.attr('id', 'atum-export-link-wrap')\n            .find('button').attr({\n            'id': 'show-export-settings-link',\n            'aria-controls': 'atum-export-wrap'\n        }).text(this.settings.get('tabTitle'));\n        this.$tabContentWrapper.append($tabContent);\n        this.$tabsWrapper.prepend($tab);\n        $('#show-export-settings-link').click(window['screenMeta'].toggleEvent);\n        this.$exportForm = this.$pageWrapper.find('#atum-export-settings');\n    };\n    DataExport.prototype.downloadReport = function () {\n        window.open(window['ajaxurl'] + \"?action=atum_export_data&page=\" + __WEBPACK_IMPORTED_MODULE_0__utils_utils__[\"a\" /* Utils */].getUrlParameter('page') + \"&screen=\" + this.settings.get('screen') + \"&token=\" + this.settings.get('exportNonce') + \"&\" + this.$exportForm.serialize(), '_blank');\n    };\n    return DataExport;\n}());\n/* harmony default export */ __webpack_exports__[\"a\"] = (DataExport);\n\n\n/***/ })\n\n/******/ });\n\n\n// WEBPACK FOOTER //\n// atum-data-export.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 61);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 05a97357da1f66547210","/* ====================\n   SETTINGS\n   ==================== */\n\n\nexport default class Settings {\n\t\n\tsettings: any = {};\n\t\n\tconstructor(\n\t\tprivate varName: string,\n\t\tprivate defaults: any = {}\n\t) {\n\t\t\n\t\tconst localizedOpts: any = typeof window[varName] !== 'undefined' ? window[varName] : {};\n\t\n\t\t// Merge all the settings.\n\t\tObject.assign( this.settings, defaults, localizedOpts );\n\t\t\n\t}\n\t\n\tget(prop: string) {\n\t\t\n\t\tif (typeof this.settings[prop] !== 'undefined') {\n\t\t\treturn this.settings[prop];\n\t\t}\n\t\t\n\t\treturn undefined;\n\t\t\n\t}\n\t\n\tgetAll() {\n\t\treturn this.settings;\n\t}\n\t\n\tdelete(prop: string) {\n\t\t\n\t\tif (this.settings.hasOwnProperty(prop)) {\n\t\t\tdelete this.settings[prop];\n\t\t}\n\t\t\n\t}\n\t\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/js/src/config/_settings.ts","/* ====================\n   UTILS\n   ==================== */\n\n\nexport let Utils = {\n\t\n\tdelayTimer : 0,\n\t\n\t/**\n\t * Apply a delay\n\t *\n\t * @return Function\n\t */\n\tdelay(callback: Function, ms: number) {\n\t\t\n\t\tclearTimeout(this.delayTimer);\n\t\tthis.delayTimer = setTimeout(callback, ms);\n\t\t\n\t},\n\t\n\t/**\n\t * Filter the URL Query to extract variables\n\t *\n\t * @see http://css-tricks.com/snippets/javascript/get-url-variables/\n\t *\n\t * @param String query    The URL query part containing the variables.\n\t * @param String variable Name of the variable we want to get.\n\t *\n\t * @return String|Boolean The variable value if available, false else.\n\t */\n\tfilterQuery(query: string, variable: string): string|boolean {\n\t\t\n\t\tconst vars = query.split('&');\n\t\t\n\t\tfor (let i = 0; i < vars.length; i++) {\n\t\t\t\n\t\t\tconst pair = vars[i].split('=');\n\t\t\t\n\t\t\tif (pair[0] === variable) {\n\t\t\t\treturn pair[1];\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\treturn false;\n\t\t\n\t},\n\t\n\tfilterByData($elem: JQuery, prop: string, val: any) {\n\t\t\n\t\tif (typeof val === 'undefined') {\n\t\t\treturn $elem.filter( (index: number, elem: Element) => {\n\t\t\t\treturn typeof $(elem).data(prop) !== 'undefined'\n\t\t\t});\n\t\t};\n\t\t\n\t\treturn $elem.filter( (index: number, elem: Element) => {\n\t\t\treturn $(elem).data(prop) == val\n\t\t});\n\t\t\n\t},\n\t\n\t/**\n\t * Add a notice on top identical to the WordPress' admin notices\n\t *\n\t * @param String type The notice type. Can be \"updated\" or \"error\".\n\t * @param String msg  The message.\n\t */\n\taddNotice(type: string, msg: string) {\n\t\t\n\t\tlet $notice: JQuery        = $('<div class=\"' + type + ' notice is-dismissible\"><p><strong>' + msg + '</strong></p></div>').hide(),\n\t\t    $dismissButton: JQuery = $('<button />', {type: 'button', class: 'notice-dismiss'}),\n\t\t    $headerEnd: JQuery     = $('.wp-header-end');\n\t\t\n\t\t$headerEnd.siblings('.notice').remove();\n\t\t$headerEnd.before($notice.append($dismissButton));\n\t\t$notice.slideDown(100);\n\t\t\n\t\t$dismissButton.on('click.wp-dismiss-notice', (evt: any) => {\n\t\t\t\n\t\t\tevt.preventDefault();\n\t\t\t\n\t\t\t$notice.fadeTo(100, 0, () => {\n\t\t\t\t$notice.slideUp(100, () => {\n\t\t\t\t\t$notice.remove();\n\t\t\t\t});\n\t\t\t});\n\t\t\t\n\t\t});\n\t\t\n\t},\n\t\n\timagesLoaded($wrapper: JQuery): JQueryPromise<any> {\n\t\t\n\t\t// Get all the images (excluding those with no src attribute).\n\t\tlet $imgs: JQuery = $wrapper.find('img[src!=\"\"]');\n\t\t\n\t\t// If there's no images, just return an already resolved promise.\n\t\tif (!$imgs.length) {\n\t\t\treturn $.Deferred().resolve().promise();\n\t\t}\n\t\t\n\t\t// For each image, add a deferred object to the array which resolves when the image is loaded (or if loading fails)\n\t\tlet dfds = [];\n\t\t$imgs.each(function() {\n\t\t\t\n\t\t\tlet dfd: any = $.Deferred(),\n\t\t\t    img: any = new Image();\n\t\t\t\n\t\t\tdfds.push(dfd);\n\t\t\t\n\t\t\timg.onload = function() {\n\t\t\t\tdfd.resolve();\n\t\t\t}\n\t\t\t\n\t\t\timg.onerror = function() {\n\t\t\t\tdfd.resolve();\n\t\t\t}\n\t\t\t\n\t\t\timg.src = this.src;\n\t\t\t\n\t\t});\n\t\t\n\t\t// Return a master promise object which will resolve when all the deferred objects have resolved\n\t\t// IE - when all the images are loaded\n\t\treturn $.when.apply($, dfds);\n\t\t\n\t},\n\t\n\t/**\n\t * Helper to get parameters from the URL\n\t *\n\t * @param string name\n\t *\n\t * @return string\n\t */\n\tgetUrlParameter(name: string) {\n\t\t\n\t\tif (typeof URLSearchParams !== 'undefined') {\n\t\t\t\n\t\t\tconst urlParams = new URLSearchParams(window.location.search);\n\t\t\t\n\t\t\treturn urlParams.get(name);\n\t\t\t\n\t\t}\n\t\t// Deprecated: Only for old browsers non supporting URLSearchParams.\n\t\telse {\n\t\t\t\n\t\t\tname = name.replace(/[\\[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\n\t\t\tconst regex: RegExp     = new RegExp('[\\\\?&]' + name + '=([^&#]*)'),\n\t\t\t      results: string[] = regex.exec(window.location.search);\n\t\t\t\n\t\t\treturn results === null ? '' : decodeURIComponent(results[1].replace(/\\+/g, ' '));\n\t\t}\n\t\t\n\t},\n\t\n\t/**\n\t * Get a sanitized HTML code and returns valid HTML code\n\t *\n\t * @param string input\n\t *\n\t * @return string\n\t */\n\thtmlDecode(input: string){\n\t\t\n\t\tconst e: HTMLElement = document.createElement('div');\n\t\te.innerHTML = input;\n\t\t\n\t\treturn e.childNodes[0].nodeValue;\n\t},\n\t\n}\n\n\n\n// WEBPACK FOOTER //\n// ./assets/js/src/utils/_utils.ts","/**\n * Atum Data Export\n *\n * @copyright Stock Management Labs Â©2019\n *\n * @since 1.2.5\n */\n\nwindow['$'] = window['jQuery'];\n\n\n/**\n * Components\n */\n\nimport Settings from './config/_settings';\nimport DataExport from './components/export/_export';\n\n\n// Modules that need to execute when the DOM is ready should go here.\njQuery( ($) => {\n\t\n\t// Get the options from the localized var.\n\tlet settings = new Settings('atumExport');\n\tnew DataExport(settings);\n\t\n});\n\n\n// WEBPACK FOOTER //\n// ./assets/js/src/data-export.ts","/* ========================================\n   DATA EXPORT\n   ======================================== */\n\nimport Settings from '../../config/_settings';\nimport { Utils } from '../../utils/_utils';\n\nexport default class DataExport {\n\t\n\t$pageWrapper: JQuery;\n\t$tabContentWrapper: JQuery;\n\t$tabsWrapper: JQuery;\n\t$exportForm: JQuery;\n\t\n\tconstructor(\n\t\tprivate settings: Settings\n\t) {\n\t\t\n\t\tthis.$pageWrapper = $('#wpbody-content');\n\t\tthis.$tabContentWrapper = $('#screen-meta');\n\t\tthis.$tabsWrapper = $('#screen-meta-links');\n\t\t\n\t\tthis.createExportTab();\n\t\t\n\t\tthis.$pageWrapper\n\t\t\n\t\t\t// Export button\n\t\t\t.on('submit', '#atum-export-settings', (evt: JQueryEventObject) => {\n\t\t\t\tevt.preventDefault();\n\t\t\t\tthis.downloadReport();\n\t\t\t})\n\t\t\n\t\t\t// Disable max length option\n\t\t\t.on('change', '#disableMaxLength', (evt: JQueryEventObject) =>  {\n\t\t\t\t\n\t\t\t\tconst $checkbox: JQuery = $(evt.currentTarget),\n\t\t\t\t      $input: JQuery    = $checkbox.parent().siblings('input[type=number]');\n\t\t\t\t\n\t\t\t\tif ($checkbox.is(':checked')) {\n\t\t\t\t\t$input.prop('disabled', true);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t$input.prop('disabled', false);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t});\n\t\t\n\t}\n\t\n\t/**\n\t * Duplicate the \"Screen Options\" tab\n\t */\n\tcreateExportTab() {\n\t\t\n\t\tconst $tab: JQuery        = this.$tabsWrapper.find('#screen-options-link-wrap').clone(),\n\t\t      $tabContent: JQuery = this.$tabContentWrapper.find('#screen-options-wrap').clone();\n\t\t\n\t\t$tabContent.attr({\n\t\t\t'id'        : 'atum-export-wrap',\n\t\t\t'aria-label': this.settings.get('tabTitle'),\n\t\t});\n\t\t\n\t\t$tabContent.find('form').attr('id', 'atum-export-settings');\n\t\t$tabContent.find('.screen-options').remove();\n\t\t$tabContent.find('input[type=submit]').val( this.settings.get('submitTitle') );\n\t\t$tabContent.find('#screenoptionnonce').remove();\n\t\t\n\t\t// Add a fieldset for product type selection.\n\t\tif (typeof this.settings.get('productTypes') !== 'undefined') {\n\t\t\t\n\t\t\tconst $typeFieldset: JQuery = $('<fieldset class=\"product-type\" />');\n\t\t\t\n\t\t\t$typeFieldset.append(`<legend>${ this.settings.get('productTypesTitle') }</legend>`);\n\t\t\t$typeFieldset.append( this.settings.get('productTypes') );\n\t\t\t$typeFieldset.insertAfter( $tabContent.find('fieldset').last() );\n\t\t\t\n\t\t}\n\t\t\n\t\t// Add a fieldset for product category selection.\n\t\tif (typeof this.settings.get('categories') !== 'undefined') {\n\t\t\t\n\t\t\tconst $catFieldset: JQuery = $('<fieldset class=\"product-category\" />');\n\t\t\t\n\t\t\t$catFieldset.append(`<legend>${ this.settings.get('categoriesTitle') }</legend>`);\n\t\t\t$catFieldset.append( this.settings.get('categories') );\n\t\t\t$catFieldset.insertAfter( $tabContent.find('fieldset').last() );\n\t\t\t\n\t\t}\n\t\t\n\t\t// Add a fieldset for title length setup.\n\t\tconst $titleLengthFieldset: JQuery = $('<fieldset class=\"title-length\" />');\n\t\t\n\t\t$titleLengthFieldset.append(`<legend>${ this.settings.get('titleLength') }</legend>`);\n\t\t$titleLengthFieldset.append(`<input type=\"number\" step=\"1\" min=\"0\" name=\"title_max_length\" value=\"${ this.settings.get('maxLength') }\"> `);\n\t\t$titleLengthFieldset.append(`<label><input type=\"checkbox\" id=\"disableMaxLength\" value=\"yes\">${ this.settings.get('disableMaxLength') }</label>`);\n\t\t$titleLengthFieldset.insertAfter( $tabContent.find('fieldset').last() );\n\t\t\n\t\t// Add a fieldset for format output.\n\t\tconst $formatFieldset: JQuery = $('<fieldset class=\"output-format\" />');\n\t\t$formatFieldset.append(`<legend>${ this.settings.get('outputFormatTitle') }</legend>`);\n\t\t\n\t\t$.each(this.settings.get('outputFormats'), (key: string, value: string) => {\n\t\t\t$formatFieldset.append(`<label><input type=\"radio\" name=\"output-format\" value=\"${ key }\">${ value }</label>`);\n\t\t});\n\t\t\n\t\t$formatFieldset.find('input[name=output-format]').first().prop('checked', true);\n\t\t$formatFieldset.insertAfter( $tabContent.find('fieldset').last() );\n\t\t\n\t\t// Clearfix\n\t\t$tabContent.find('.submit').before('<div class=\"clear\"></div>');\n\t\t\n\t\t$tab.attr('id', 'atum-export-link-wrap')\n\t\t\t.find('button').attr({\n\t\t\t\t'id'           : 'show-export-settings-link',\n\t\t\t\t'aria-controls': 'atum-export-wrap'\n\t\t\t}).text( this.settings.get('tabTitle') );\n\t\t\n\t\tthis.$tabContentWrapper.append($tabContent);\n\t\tthis.$tabsWrapper.prepend($tab);\n\t\t\n\t\t// Use the WP's screenMeta toggleEvent method\n\t\t$('#show-export-settings-link').click( window['screenMeta'].toggleEvent );\n\t\t\n\t\tthis.$exportForm = this.$pageWrapper.find('#atum-export-settings');\n\t\t\n\t}\n\t\n\t/**\n\t * Download the report.\n\t */\n\tdownloadReport() {\n\t\t\n\t\t/*$('#export-file-downloader').remove();\n\t\t\n\t\tvar $iframe = $('<iframe/>', {\n\t\t\tid  : 'export-file-downloader',\n\t\t\tsrc : ajaxurl + '?action=atum_export_data&token=' + atumExport.exportNonce + '&' + this.$exportForm.serialize()\n\t\t});\n\t\t\n\t\t$iframe.appendTo('body');*/\n\t\t\n\t\twindow.open( `${ window['ajaxurl'] }?action=atum_export_data&page=${ Utils.getUrlParameter('page') }&screen=${ this.settings.get('screen') }&token=${ this.settings.get('exportNonce') }&${ this.$exportForm.serialize() }`, '_blank');\n\t\t\n\t}\n\t\n}\n\n\n// WEBPACK FOOTER //\n// ./assets/js/src/components/export/_export.ts"],"sourceRoot":""}